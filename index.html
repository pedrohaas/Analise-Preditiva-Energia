<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interativo de Análise Preditiva | Preços de Energia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/style.css">
</head>
<body class="loading"> <div id="loader-overlay">
        <div class="loader-spinner"></div>
    </div>

    <header>
        <div class="container">
            <h1>Dashboard de Análise Preditiva</h1>
            <p>Suporte à Decisão Baseado em Previsões de Preços de Energia</p>
        </div>
    </header>

    <main class="container">
        <section id="region-selector">
            <h3>Selecione uma Região para Análise de Previsão</h3>
            <div class="region-buttons">
                <button class="region-btn active" data-region="sudeste">Sudeste</button>
                <button class="region-btn" data-region="sul">Sul</button>
                <button class="region-btn" data-region="nordeste">Nordeste</button>
                <button class="region-btn" data-region="norte">Norte</button>
            </div>
        </section>

        <section class="analysis-step">
            <h2>Passo 1: Entendendo o Comportamento do Preço</h2>
            <p class="section-intro">Antes de prever, precisamos entender. A análise de decomposição divide a série de preços em seus componentes fundamentais: a <strong>Tendência</strong> de longo prazo, os ciclos de <strong>Sazonalidade</strong> e os <strong>Resíduos</strong> (ruído aleatório).</p>
            <div class="result-card">
                <h3 id="decomposition-card-title">Decomposição da Série Temporal</h3>
                <img id="decompositionChart" class="expandable-image" src="static/images/decomposition_sudeste.png" alt="Gráfico de Decomposição da Série">
                <small>Clique na imagem para expandir.</small>
            </div>
        </section>

        <section class="analysis-step">
            <h2 id="outliers-title">Passo 2: Preparação e Limpeza dos Dados</h2>
            <p class="section-intro">Com os padrões identificados, o próximo passo foi tratar os "outliers" – valores atípicos que podem distorcer a análise. Isso garante uma série temporal mais estável e previsões mais confiáveis.</p>
            <div class="result-card">
                <h3 id="outliers-card-title">Detecção e Tratamento de Outliers</h3>
                <img id="outliersChart" class="expandable-image" src="static/images/outliers_sudeste.png" alt="Gráfico de Detecção de Outliers">
                <small>Clique na imagem para expandir.</small>
            </div>
        </section>

        <section class="analysis-step">
            <h2>Passo 3: Escolha e Validação dos Modelos</h2>
            <p class="section-intro">
                Aplicamos quatro abordagens estatísticas e comparamos seus resultados. A tabela abaixo mostra o desempenho de cada modelo ao prever os últimos 5 meses de dados históricos conhecidos (backtesting), validando sua eficácia antes de usá-los para prever o futuro.
            </p>
            <div class="models-grid">
                <div class="model-card"><h4>Prophet</h4><p>Excelente para dados com fortes tendências sazonais. Robusto a dados faltantes e mudanças de tendência.</p></div>
                <div class="model-card"><h4>ARIMA</h4><p>Modelo estatístico clássico ideal para capturar tendências e dependências nos dados.</p></div>
                <div class="model-card"><h4>SARIMA</h4><p>Evolução do ARIMA que adiciona um componente sazonal, tornando-o especialmente poderoso para este tipo de dado.</p></div>
                <div class="model-card"><h4>STL Forecast</h4><p>Um método robusto que decompõe a série em Tendência, Sazonalidade e Resíduos, e depois prevê cada componente.</p></div>
            </div>
            <div class="result-card validation-card">
                <h3>Métricas de Validação dos Modelos (Backtesting)</h3>
                <p id="validation-summary">Analisando a região SUDESTE...</p>
                <div class="table-wrapper">
                    <table id="validation-table">
                        <thead>
                            <tr>
                                <th>Modelo</th>
                                <th>MAE (Erro Médio Absoluto)</th>
                                <th>MSE (Erro Quadrático Médio)</th>
                                <th>RMSE (Raiz do Erro Quadrático Médio)</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
                <small>Menores valores indicam um melhor desempenho do modelo nos dados históricos.</small>
            </div>
        </section>

        <section class="analysis-step">
            <h2>Passo 4: Previsões e Análise de Cenários Futuros</h2>
            <p class="section-intro">Com os modelos validados, geramos as previsões para os próximos 16 meses. O destaque abaixo aponta o modelo com melhor aderência aos dados históricos, servindo como nossa principal referência para o futuro.</p>

            <div class="best-model-card">
                <h4>⭐ Modelo em Destaque</h4>
                <p id="best-model-text">Com base na validação, o modelo mais preciso para esta região foi o...</p>
            </div>

            <div class="results-grid">
                <div class="result-card">
                    <h3>Comparativo de Previsões de Preço</h3>
                    <img id="forecastChart" class="expandable-image" src="static/images/forecast_sudeste.png" alt="Gráfico de Previsões">
                    <small>Clique na imagem para expandir.</small>
                </div>
                <div class="result-card full-width">
                    <h3>Tabela Detalhada (Próximos 16 Meses)</h3>
                    <div class="table-wrapper">
                        <table id="forecastTable">
                            </table>
                    </div>
                </div>
            </div>
        </section>

        <section class="analysis-step">
            <h2>Passo 5: Análise de Decisão Baseada em Dados Históricos</h2>
            <p class="section-intro">
                Esta análise utiliza uma <strong>Árvore de Decisão</strong> para determinar a melhor estratégia de recolhimento de palhiço, baseada na probabilidade de ocorrência de diferentes faixas de preço extraídas de toda a série histórica. O objetivo é escolher a alternativa com o maior <strong>Valor Monetário Esperado (E(Receita))</strong>.
            </p>
            
            <div class="methodology-box">
                <div class="methodology-icon">i</div>
                <div class="methodology-text">
                    <strong>Nota Metodológica:</strong> Toda a análise de Árvore de Decisão e as imagens na galeria abaixo foram calculadas utilizando exclusivamente os dados históricos da região <strong>Sudeste/Centro-Oeste</strong>, que serve como referência para este estudo de caso. Esta seção é estática e não se altera com o seletor de regiões.
                </div>
            </div>

            <div class="result-card">
                <h3>Árvore de Decisão Comparativa das Alternativas</h3>
                <p>O gráfico abaixo consolida os resultados, apontando a melhor alternativa geral com base nos dados históricos da região Sudeste/Centro-Oeste.</p>
                <img id="decisionTreeChart" class="expandable-image" src="static/images/decision_tree_alternatives.png" alt="Gráfico da Árvore de Decisão Comparativa">
                <small>Clique na imagem para expandir.</small>
            </div>

            <div class="gallery-wrapper">
                <h3>Galeria de Análises de Suporte</h3>
                <div class="horizontal-gallery">
                    <div class="gallery-item"><img src="static/images/sensibilidade_receita.png" class="expandable-image" alt="Análise de Sensibilidade da Receita"><div class="gallery-caption">Análise de Sensibilidade</div></div>
                    <div class="gallery-item"><img src="static/images/arvore_enfardamento.png" class="expandable-image" alt="Árvore de Decisão para Enfardamento"><div class="gallery-caption">Árvore: Enfardamento</div></div>
                    <div class="gallery-item"><img src="static/images/arvore_colheita_integral.png" class="expandable-image" alt="Árvore de Decisão para Colheita Integral"><div class="gallery-caption">Árvore: Colheita Integral</div></div>
                    <div class="gallery-item"><img src="static/images/arvore_colheita_parcial.png" class="expandable-image" alt="Árvore de Decisão para Colheita Parcial"><div class="gallery-caption">Árvore: Colheita Parcial</div></div>
                    <div class="gallery-item"><img src="static/images/quadro_min_max.png" class="expandable-image" alt="Quadro de Valores Mínimos e Máximos"><div class="gallery-caption">Tabela: Preços Min/Max</div></div>
                </div>
            </div>
        </section>

        <section class="analysis-step">
            <h2>Passo 6: Ferramenta de Análise de Investimento (Baseada em Previsões Futuras)</h2>
            <p class="section-intro">
                Diferente da Árvore de Decisão, que usa probabilidades históricas, esta ferramenta utiliza as <strong>previsões de preço para os próximos 16 meses</strong> geradas pelos modelos. Ela permite simular um cenário de investimento futuro, calculando a economia que seria gerada ao produzir energia própria em vez de comprá-la da rede.
            </p>
            <div class="disclaimer-box">
                <div class="disclaimer-icon">!</div>
                <div class="disclaimer-text">
                    <strong>Aviso Importante:</strong> Esta é uma ferramenta de simulação desenvolvida para fins estritamente acadêmicos. As previsões são baseadas em um conjunto de dados fixo que pode estar desatualizado. Os resultados aqui apresentados são ilustrativos e <strong>não devem, em nenhuma hipótese, ser utilizados como base para decisões financeiras reais.</strong>
                </div>
            </div>
            <div class="investment-tool">
                <div class="investment-inputs">
                    <div class="input-group"><label for="investmentCost">Custo do Investimento (R$)</label><input type="number" id="investmentCost" value="310000"></div>
                    <div class="input-group"><label for="energyConsumption">Consumo Mensal de Energia (MWh)</label><input type="number" id="energyConsumption" value="540"></div>
                </div>
                <div class="investment-results"><table id="decisionTable"><thead><tr><th>Modelo de Previsão</th><th>Economia Total em 16 meses</th><th>Resultado (Lucro/Prejuízo)</th><th>Retorno do Investimento (Payback)</th><th>Recomendação</th></tr></thead><tbody></tbody></table></div>
            </div>
        </section>
    </main>

    <div id="lightbox" class="lightbox-overlay">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <footer>
        <div class="container footer-content">
            <div class="footer-section about"><h4>Sobre o Projeto</h4><p>Este projeto de análise preditiva foi desenvolvido para fins acadêmicos, disponibilizado gratuitamente para a comunidade.</p></div>
            <div class="footer-section developers"><h4>Desenvolvedores</h4><p><a href="https://www.linkedin.com/in/opedroalves/" target="_blank">Pedro Henrique Alves de Araujo Silva</a></p><p><a href="https://www.linkedin.com/in/laura-rieko-imai/" target="_blank">Laura Rieko Marçal Imai</a></p></div>
            <div class="footer-section links"><h4>Links Úteis</h4><p><a href="https://github.com/pedrohaas/T1-TomadaDecisao/tree/main" target="_blank">Código Fonte no GitHub</a></p><p><a href="https://github.com/pedrohaas/T1-TomadaDecisao/blob/main/LICENSE" target="_blank">Licença MIT</a></p></div>
        </div>
        <div class="footer-bottom"><p>Copyright © 2025 | Lançado sob a Licença MIT.</p></div>
    </footer>

    <script src="static/script.js"></script>
</body>
</html>